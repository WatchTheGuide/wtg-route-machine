# Missing data-testid for Media Manager Components

**Generated by QA Engineer - Tier 2 Analysis**  
**Date:** 2025-12-12  
**Epic:** US 8.10 - Media Manager

## Overview

This document lists all `data-testid` attributes referenced in E2E tests but potentially missing from component implementations. Web Specialist should verify and add these attributes to ensure E2E tests can locate elements correctly.

---

## ğŸ”´ CRITICAL - Required for E2E Tests

### MediaPage.tsx

| data-testid                 | Location                     | Status     | Notes            |
| --------------------------- | ---------------------------- | ---------- | ---------------- |
| `media-grid`                | Main grid container          | âœ… Present | Line 240         |
| `media-card`                | MediaCard component          | âœ… Present | In MediaCard.tsx |
| `media-thumbnail`           | Image in MediaCard           | âœ… Present | In MediaCard.tsx |
| `media-title`               | Title in MediaCard           | âœ… Present | In MediaCard.tsx |
| `media-tags`                | Tags container in MediaCard  | âœ… Present | In MediaCard.tsx |
| `media-count`               | Total media count badge      | âœ… Present | Line 205         |
| `media-search`              | Search input field           | âœ… Present | Line 152         |
| `upload-button`             | Upload button in header      | âœ… Present | Line 142         |
| `upload-first-media-button` | Upload button in empty state | âœ… Present | Line 235         |
| `empty-state`               | Empty state container        | âœ… Present | Line 226         |
| `context-filter`            | Context filter select        | âœ… Present | Line 165         |
| `sort-by`                   | Sort by select               | âœ… Present | Line 181         |
| `sort-order`                | Sort order button            | âœ… Present | Line 191         |

### Missing in MediaPage.tsx

| data-testid              | Expected Location       | Action Required                                      |
| ------------------------ | ----------------------- | ---------------------------------------------------- |
| âŒ `no-results`          | Empty state container   | **Add to empty-state div** (currently `empty-state`) |
| âŒ `clear-search`        | Clear search button     | **Add clear button to search input**                 |
| âŒ `tag-filter-button`   | Tag filter button       | **Add if tag filter UI exists**                      |
| âŒ `tag-filter-dropdown` | Tag filter dropdown     | **Add if tag filter UI exists**                      |
| âŒ `tag-option-tour`     | Tour tag option         | **Add to tag filter options**                        |
| âŒ `tag-option-poi`      | POI tag option          | **Add to tag filter options**                        |
| âŒ `active-tags`         | Active tags display     | **Add active tags container**                        |
| âŒ `clear-tags-button`   | Clear tags button       | **Add to tag filter UI**                             |
| âŒ `view-toggle-list`    | List view toggle button | **Add view toggle buttons**                          |
| âŒ `view-toggle-grid`    | Grid view toggle button | **Add view toggle buttons**                          |
| âŒ `media-list`          | List view container     | **Add if list view implemented**                     |

---

## MediaUpload.tsx

| data-testid      | Location           | Status     |
| ---------------- | ------------------ | ---------- |
| `upload-dialog`  | Dialog root        | âœ… Present |
| `dropzone`       | Dropzone area      | âœ… Present |
| `file-input`     | File input element | âœ… Present |
| `image-previews` | Preview container  | âœ… Present |
| `image-preview`  | Individual preview | âœ… Present |
| `remove-file`    | Remove file button | âœ… Present |
| `title-input`    | Title input        | âœ… Present |
| `alttext-input`  | Alt text input     | âœ… Present |
| `tags-input`     | Tags input         | âœ… Present |
| `submit-upload`  | Submit button      | âœ… Present |

**Status:** âœ… All required data-testid present

---

## MediaCard.tsx

| data-testid       | Location        | Status     |
| ----------------- | --------------- | ---------- |
| `media-card`      | Card container  | âœ… Present |
| `media-thumbnail` | Thumbnail image | âœ… Present |
| `edit-button`     | Edit button     | âœ… Present |
| `delete-button`   | Delete button   | âœ… Present |
| `media-title`     | Title text      | âœ… Present |
| `media-tags`      | Tags container  | âœ… Present |

**Status:** âœ… All required data-testid present

---

## MediaDetailsModal.tsx

| data-testid           | Location            | Status     |
| --------------------- | ------------------- | ---------- |
| `media-details-modal` | Modal root          | âœ… Present |
| `edit-button`         | Edit mode button    | âœ… Present |
| `media-image`         | Full image          | âœ… Present |
| `edit-title-input`    | Edit title input    | âœ… Present |
| `edit-alttext-input`  | Edit alt text input | âœ… Present |
| `edit-tags-input`     | Edit tags input     | âœ… Present |
| `save-button`         | Save changes button | âœ… Present |
| `delete-button`       | Delete button       | âœ… Present |

**Status:** âœ… All required data-testid present

---

## ğŸŸ¡ RECOMMENDATIONS

### 1. Add Clear Search Button

```tsx
// In MediaPage.tsx search input
<div className="relative flex-1">
  <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
  <Input
    data-testid="media-search"
    value={search}
    onChange={(e) => setSearch(e.target.value)}
    placeholder={t('media.search')}
    className="pl-9 pr-9"
  />
  {search && (
    <Button
      data-testid="clear-search"
      variant="ghost"
      size="icon"
      className="absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6"
      onClick={() => setSearch('')}>
      <X className="h-4 w-4" />
    </Button>
  )}
</div>
```

### 2. Rename empty-state to no-results

For consistency with E2E tests:

```tsx
// Change from:
<div data-testid="empty-state" ...>

// To:
<div data-testid="no-results" ...>
```

### 3. Add Tag Filter UI (if not implemented)

Tests expect tag filtering functionality:

```tsx
<Button data-testid="tag-filter-button" onClick={handleTagFilterOpen}>
  <Filter className="mr-2 h-4 w-4" />
  {t('media.filterByTag')}
</Button>

<DropdownMenu>
  <DropdownMenuContent data-testid="tag-filter-dropdown">
    <DropdownMenuItem data-testid="tag-option-tour">Tour</DropdownMenuItem>
    <DropdownMenuItem data-testid="tag-option-poi">POI</DropdownMenuItem>
    <DropdownMenuItem data-testid="tag-option-landscape">Landscape</DropdownMenuItem>
  </DropdownMenuContent>
</DropdownMenu>

{activeTags.length > 0 && (
  <div data-testid="active-tags" className="flex gap-2">
    {activeTags.map(tag => (
      <Badge key={tag}>{tag}</Badge>
    ))}
    <Button data-testid="clear-tags-button" size="sm">
      Clear All
    </Button>
  </div>
)}
```

### 4. Add View Toggle (Grid/List)

```tsx
<div className="flex gap-1">
  <Button
    data-testid="view-toggle-grid"
    variant={viewMode === 'grid' ? 'default' : 'ghost'}
    size="icon"
    onClick={() => setViewMode('grid')}>
    <Grid3x3 className="h-4 w-4" />
  </Button>
  <Button
    data-testid="view-toggle-list"
    variant={viewMode === 'list' ? 'default' : 'ghost'}
    size="icon"
    onClick={() => setViewMode('list')}>
    <List className="h-4 w-4" />
  </Button>
</div>;

{
  viewMode === 'list' ? (
    <div data-testid="media-list" className="space-y-2">
      {/* List view implementation */}
    </div>
  ) : (
    <div data-testid="media-grid" className="grid ...">
      {/* Grid view */}
    </div>
  );
}
```

---

## ğŸ“‹ ACTION ITEMS FOR WEB SPECIALIST

### High Priority

1. âœ… ~~Verify all existing data-testid attributes are correctly placed~~ (Most are present)
2. âŒ **Add `clear-search` button** to search input
3. âŒ **Rename `empty-state` to `no-results`** for consistency
4. âŒ **Implement tag filter UI** with required data-testid attributes
5. âŒ **Implement view toggle** (grid/list) with required data-testid attributes

### Medium Priority

6. Add `active-tags` display when tags are filtered
7. Add `clear-tags-button` functionality
8. Implement `media-list` view mode

### Low Priority

9. Add data-testid to any new components added to Media Manager
10. Update E2E tests if any data-testid names are changed

---

## ğŸ§ª TEST VALIDATION

After implementing missing data-testid attributes, run:

```bash
npm run test:e2e:open
```

Then verify these test suites pass:

- âœ… `cypress/e2e/media/MediaPage.cy.tsx`
- âœ… `cypress/e2e/media/MediaUpload.cy.tsx`
- âœ… `cypress/e2e/media/MediaCard.cy.tsx`
- âœ… `cypress/e2e/media/MediaDetailsModal.cy.tsx`

---

## ğŸ“š REFERENCES

- **Epic:** `user_stories/epic_8_admin_panel_and_website.md`
- **Cypress Config:** `admin/cypress.config.ts`
- **Commands:** `admin/cypress/support/commands.ts`
- **Code Review:** `CODE_REVIEW_US_8.10_MEDIA_MANAGER.md`
